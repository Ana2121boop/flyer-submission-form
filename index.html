<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flyer Submission Form</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="form-container">
        <h1>Flyer Submission</h1>

        <form id="flyerForm" novalidate>

            <section class="form-section">
                <h2>Store & Submission Details</h2>
                <div class="grid two-col">
                    <div class="form-field">
                        <label for="storeNameInput">Store Name:*</label>
                        <input type="text" id="storeNameInput" name="storeNameInput" required placeholder="Enter store name">
                    </div>
                     <div class="form-field">
                        <label for="submittedByInput">Submitted By:*</label>
                        <input type="text" id="submittedByInput" name="submittedByInput" required placeholder="Enter your name">
                    </div>
                     <div class="info-field"><strong>Submission Date:</strong> <span id="submissionDate">--</span></div>
                    <div class="info-field"><strong>Last Updated:</strong> <span id="lastUpdated">--</span></div>
                    <div class="form-field">
                        <label for="approvalStatus">Approval Status:</label>
                        <select id="approvalStatus" name="approvalStatus" disabled>
                            <option value="Draft">Draft</option>
                            <option value="Needs Review">Needs Review</option>
                            <option value="Approved">Approved</option>
                        </select>
                        <small>Status can only be changed by an Admin.</small>
                    </div>
                </div>
                 <div class="grid two-col">
                    <div>
                        <label for="flyerValidStartDate">Flyer Valid Start Date:*</label>
                        <input type="date" id="flyerValidStartDate" name="flyerValidStartDate" required>
                    </div>
                    <div>
                        <label for="flyerValidEndDate">Flyer Valid End Date:*</label>
                        <input type="date" id="flyerValidEndDate" name="flyerValidEndDate" required>
                    </div>
                 </div>
                  <div>
                    <label for="generalNotes">General Notes:</label>
                    <textarea id="generalNotes" name="generalNotes" rows="4" placeholder="Any overall comments or instructions..."></textarea>
                </div>
            </section>

            <section class="form-section">
                <h2>Flyer Products</h2>
                <div id="productEditArea" class="product-edit-container" style="display: none;">
                    <div id="productFormFieldsContainer">
                        </div>
                     <div class="product-edit-actions">
                         <button type="button" id="saveProductBtn" class="button button-primary">Save Product</button>
                         <button type="button" id="cancelProductBtn" class="button button-secondary">Cancel</button>
                     </div>
                      <p id="productEditError" class="error-message" style="display: none;"></p>
                </div>
                <div id="productList">
                    </div>
                 <button type="button" id="addProductBtn" class="button button-primary">Add Product</button>
                 <p id="productSubmitError" class="error-message" style="display: none;">At least one product is required.</p>
            </section>

            <section class="form-section" id="socialMediaSection">
                <h2>Social Media Promotion (Max 7)</h2>
                <div id="socialItemsList">
                    </div>
                <button type="button" id="addSocialBtn" class="button button-secondary" disabled>Add Social Media Item</button>
                <p id="socialLimitError" class="error-message" style="display: none;">Maximum 7 social media items reached.</p>
                 <p id="socialProductError" class="error-message" style="display: block;">Add products before selecting for social media.</p>
            </section>

            <section class="form-section">
                <h2>Print Marketing Requests</h2>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="reqPriceTags" name="reqPriceTags"> Price Tags</label>
                    <label><input type="checkbox" id="reqPosters" name="reqPosters"> Posters</label>
                    <label><input type="checkbox" id="reqSignage" name="reqSignage"> In-Store Signage / Banners</label>
                </div>
                 <div>
                    <label for="printNotes">Notes for Print Team:</label>
                    <textarea id="printNotes" name="printNotes" rows="3" placeholder="Specific quantities, sizes, or instructions..."></textarea>
                </div>
            </section>

            <div class="submit-container">
                 <p id="formError" class="error-message" style="display: none;"></p>
                 <button type="submit" id="submitBtn" class="button button-primary">Submit Flyer</button>
            </div>

        </form>
    </div>

    <template id="productFormFieldsTemplate">
         <h4>Enter Product Details</h4>
            <div class="grid three-col">
                <div class="form-field">
                    <label>Product Name:*</label>
                    <input type="text" name="productName" required placeholder="e.g., Premium Latex Paint">
                </div>
                 <div class="form-field">
                    <label>Brand Name:*</label>
                    <input type="text" name="brandName" required placeholder="e.g., ColorPro">
                </div>
                <div class="form-field">
                    <label>Category:*</label>
                     <select name="category" required>
                        <option value="" disabled selected>Select...</option>
                        <option value="Lumber">Lumber</option>
                        <option value="Mouldings">Mouldings</option>
                        <option value="Paint">Paint</option>
                        <option value="Tools">Tools</option>
                        <option value="Hardware">Hardware</option>
                    </select>
                </div>
                 <div class="form-field">
                    <label>Size/Dimensions:</label>
                    <input type="text" name="sizeDimensions" placeholder="e.g., 1 Gallon or 2x4x8">
                </div>
                <div class="form-field">
                    <label>Colour/Finish:</label>
                    <input type="text" name="colourFinish" placeholder="e.g., Eggshell White">
                </div>
                 <div class="form-field">
                    <label>SKU:</label>
                    <input type="text" name="sku" placeholder="Optional product SKU">
                </div>
                <div class="form-field">
                    <label>Regular Price:*</label>
                    <input type="number" name="regularPrice" step="0.01" min="0.01" required class="price-input" placeholder="e.g., 45.50">
                </div>
                 <div class="form-field">
                    <label>Sale Price:*</label>
                    <input type="number" name="salePrice" step="0.01" min="0.01" required class="price-input" placeholder="e.g., 39.99">
                </div>
                 <div class="form-field">
                    <label>Discount %:</label>
                    <input type="text" name="discountPercent" readonly disabled class="discount-display" placeholder="Auto-calculated">
                </div>
            </div>
            <div class="form-field">
                <label>Special Features:</label>
                <textarea name="specialFeatures" rows="2" placeholder="e.g., Low VOC, Lifetime Warranty"></textarea>
            </div>
            <div class="checkbox-group">
                <label><input type="checkbox" name="isMainFlyerProduct"> Main Flyer Product?</label>
                <label><input type="checkbox" name="isBundle" class="bundle-checkbox"> Is this a Bundle?</label>
                <label><input type="checkbox" name="requestStockImage"> Request Stock Image?</label>
            </div>
            <div class="form-field bundle-items-container" style="display: none;">
                <label>Additional Items in Bundle:*</label>
                <textarea name="bundleItems" rows="2" placeholder="List items included in the bundle..."></textarea>
            </div>
             <div class="form-field">
                 <label>Upload Custom Product Image (Optional):</label>
                 <input type="file" name="productImage" accept="image/*" class="product-image-input">
                 <div class="image-preview">
                     <small>No image selected.</small>
                 </div>
             </div>
    </template>

     <template id="productDisplayTemplate">
        <div class="product-item list-item">
            <button type="button" class="remove-item-btn button-danger" title="Remove Product">&times;</button>
            <div class="product-display-content">
                </div>
             <img src="" alt="Product Preview" class="product-preview-img" style="display: none;">
        </div>
    </template>

     <template id="socialItemTemplate">
         <div class="social-item list-item">
             <button type="button" class="remove-item-btn button-danger" title="Remove Item">&times;</button>
             <h4>Social Promotion Item</h4>
             <div class="grid two-col">
                 <div class="form-field">
                    <label>Select Product:*</label>
                    <select name="socialProductId" required class="social-product-select">
                        <option value="" disabled selected>Select Product...</option>
                        </select>
                 </div>
                <div class="form-field">
                    <label>Preferred Post Type:*</label>
                    <select name="socialPostType" required>
                         <option value="" disabled selected>Select Type...</option>
                         <option value="Image">Image</option>
                         <option value="Reel">Reel</option>
                         <option value="Carousel">Carousel</option>
                         <option value="Story">Story</option>
                    </select>
                </div>
                <div class="form-field full-width">
                    <label>Caption / Selling Point:</label>
                    <input type="text" name="socialCaption" placeholder="e.g., Limited time offer! Get yours today.">
                </div>
             </div>
         </div>
     </template>

     <div id="successModal" class="modal-overlay" style="display: none;">
         <div class="modal-box">
             <button type="button" id="modalCloseBtn" class="modal-close-btn" title="Close">&times;</button>
             <h2>Success!</h2>
             <p id="modalMessage">Your flyer data has been gathered.</p>
             <p><small>(Check the browser console for details. This is a simulation.)</small></p>
         </div>
     </div>

    <script src="script.js"></script>
</body>
</html>
